package OfflineQuotes.services;
import com.mashape.unirest.http.HttpResponse;
import com.mashape.unirest.http.Unirest;
import com.mashape.unirest.http.exceptions.UnirestException;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException;

import java.io.FileReader;
import java.io.IOException;

public class idvPremiumRequestService {
    static JSONParser parser = new JSONParser();

    public static JSONObject insurerIdvAndAddonCall() throws IOException, ParseException, UnirestException {
        JSONObject idvRequestBody = getIdvRequestBody();
        idvRequestBody = updateInsurerDataInIdvrequestBody(idvRequestBody);
        JSONObject idvPremiumRequestResponse = null;
        JSONParser parser = new JSONParser();
        idvPremiumRequestResponse = (JSONObject) parser.parse(makeIdvPremiumRequest(idvRequestBody.toString()));
        System.out.println("IDV RESPONSE");
        System.out.println(idvPremiumRequestResponse);
        return idvPremiumRequestResponse;
    }

    private static String makeIdvPremiumRequest(String idvRequestBody) throws UnirestException {
        /*
        * Need to add body and check if it working as expected
        * */
        Unirest.setTimeouts(0, 0);
        HttpResponse<String> response = Unirest.post("https://pro.turtlemint.com/api/platform/v0/premiums/request")
                .header("authority", "pro.turtlemint.com")
                .header("pragma", "no-cache")
                .header("cache-control", "no-cache")
                .header("sec-ch-ua", "\"Chromium\";v=\"94\", \"Google Chrome\";v=\"94\", \";Not A Brand\";v=\"99\"")
                .header("accept", "application/json, text/plain, */*")
                .header("content-type", "application/json")
                .header("sec-ch-ua-mobile", "?0")
                .header("user-agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.61 Safari/537.36")
                .header("sec-ch-ua-platform", "\"macOS\"")
                .header("origin", "https://pro.turtlemint.com")
                .header("sec-fetch-site", "same-origin")
                .header("sec-fetch-mode", "cors")
                .header("sec-fetch-dest", "empty")
                .header("referer", "https://pro.turtlemint.com/commercial-vehicle-insurance/results/MGGPAUFPRJ7")
                .header("accept-language", "en-GB,en-US;q=0.9,en;q=0.8")
                .header("cookie", "adb=0; _gcl_au=1.1.1850871477.1627982512; _fbp=fb.1.1627982512154.1097493888; _ga=GA1.3.640835248.1627982512; _ga=GA1.2.640835248.1627982512; _hjid=91a1e9c9-eac8-4785-8f60-a0c770cc008e; G_ENABLED_IDPS=google; showActivityPoints=true; rl_page_init_referrer=RudderEncrypt%3AU2FsdGVkX1%2BgkIsnn759i0lOufPAdJ9q4A0dKZvM9sc%3D; rl_page_init_referring_domain=RudderEncrypt%3AU2FsdGVkX18wH3Y7q3qszcdLOXNZBauqAWFcpkgyAUY%3D; __zlcmid=16AkLRPZDRBnVFm; _gid=GA1.3.213860080.1632889535; _gid=GA1.2.213860080.1632889535; isUtmParamsChange=false; mp_somethingrandomstring_mixpanel=%7B%22distinct_id%22%3A%20%2217b0b51c1bf464-08bdb037083e34-35627202-1fa400-17b0b51c1c06fc%22%2C%22%24device_id%22%3A%20%2217b0b51c1bf464-08bdb037083e34-35627202-1fa400-17b0b51c1c06fc%22%2C%22%24initial_referrer%22%3A%20%22%24direct%22%2C%22%24initial_referring_domain%22%3A%20%22%24direct%22%7D; mp_94b72fe8fa0b0fbf2984f556ad073226_mixpanel=%7B%22distinct_id%22%3A%20%225c90df45e4b0f2135296ddd7%22%2C%22%24device_id%22%3A%20%2217b0b51c1d7286-0c93b310d115ca-35627202-1fa400-17b0b51c1d8d37%22%2C%22%24initial_referrer%22%3A%20%22%24direct%22%2C%22%24initial_referring_domain%22%3A%20%22%24direct%22%2C%22__mps%22%3A%20%7B%7D%2C%22__mpso%22%3A%20%7B%7D%2C%22__mpus%22%3A%20%7B%7D%2C%22__mpa%22%3A%20%7B%7D%2C%22__mpu%22%3A%20%7B%7D%2C%22__mpr%22%3A%20%5B%5D%2C%22__mpap%22%3A%20%5B%5D%2C%22%24user_id%22%3A%20%225c90df45e4b0f2135296ddd7%22%7D; rl_user_id=RudderEncrypt%3AU2FsdGVkX1%2BuK14hzm3NXiDRwPqZKF8Zr6Dt%2BSp41e8%3D; rl_anonymous_id=RudderEncrypt%3AU2FsdGVkX1%2BPKblaOg%2B0U%2F%2BKSZomCjxImfipJYyXTfWbKGJ%2BiVg5UFQeyY8KfUg8z5hlVcnD1hjJewqavZaAcA%3D%3D; rl_group_id=RudderEncrypt%3AU2FsdGVkX19g6U6BOqvxBF8lJ1Fl0UzhMwf0vPV9xsQ%3D; rl_trait=RudderEncrypt%3AU2FsdGVkX18zCHIDqEj%2FjJj4LEfLpl4zhL%2FRidAqCGI%3D; rl_group_trait=RudderEncrypt%3AU2FsdGVkX19sAF%2BJTv6L8W7MHRG1sL6Onyim%2BDKH3LU%3D; data=; PLAY_SESSION=2a9dea431b5ccdd472c9b125987c034de626ae9e-host=http%3A%2F%2Fmotor-service%3A9000&X-Forwarded-For=117.221.94.64&broker=turtlemint&x-partner-id=5c90df45e4b0f2135296ddd7; _gat=1; _gat_UA-89517885-1=1")
                .body("{\n    \"_id\": \"MGGPAUFPRJ7\",\n    \"requestType\": \"INITIAL\",\n    \"isAsync\": true,\n    \"vertical\": \"CV\",\n    \"userMobile\": \"\",\n    \"expiryDt\": \"05/10/2021\",\n    \"customerName\": \"test\",\n    \"policyType\": \"comprehensive\",\n    \"initialReqFlag\": false,\n    \"motorPremiumRequest\": {\n        \"businessType\": 0,\n        \"rtoId\": \"MH01\",\n        \"rtoDesp\": \"Mumbai Central- Location- Tardeo\",\n        \"year\": \"2019\",\n        \"previousInsurer\": \"BAJAJ\",\n        \"isPreviousPolicyFromSameBroker\": false,\n        \"vehicleType\": \"Taxi\",\n        \"bodyType\": \"Self Drive\",\n        \"cvTypeId\": 30,\n        \"prevClaim\": \"false\",\n        \"prevNCB\": \"20\",\n        \"unknownNCBFlag\": false,\n        \"expiryFlag\": false,\n        \"eligibleForNCB\": true,\n        \"expiryInTwoDays\": false,\n        \"idv\": 500000,\n        \"comprehensive\": {\n            \"hydrostaticLockCover\": 0,\n            \"paOwnerDriver\": 0\n        },\n        \"tp\": {\n            \"paOwnerDriver\": 0,\n            \"zeroDep\": false,\n            \"rsa\": false,\n            \"engineProtect\": false,\n            \"ncbProtect\": false,\n            \"antiTheft\": false,\n            \"secureTowing\": false,\n            \"tyreSecure\": false,\n            \"emergencyTransportAndHotelExpense\": false,\n            \"repairOfGlassRubberPlasticParts\": false,\n            \"consumableCover\": false,\n            \"fullInvoiceCover\": false,\n            \"keyReplacement\": false,\n            \"fibretank\": false,\n            \"geographicExt\": false,\n            \"dailyCashAllowance\": false,\n            \"personalBaggage\": false,\n            \"drivingTuitionCoverage\": false,\n            \"accidentalHospitalization\": false,\n            \"hydrostaticLockCover\": false,\n            \"imt23\": false,\n            \"tppd\": false\n        },\n        \"requestId\": \"MGGPAUFPRJ7\",\n        \"initialReqFlag\": false,\n        \"make\": \"MARUTI\",\n        \"model\": \"SWIFT DZIRE\",\n        \"fuel\": \"Petrol\",\n        \"cvVehicleClass\": \"PCV\",\n        \"cvVehicleType\": \"\",\n        \"carryingCapacity\": \"5\",\n        \"cubicCapacity\": \"1198\",\n        \"carrierType\": \"PUBLIC\",\n        \"cvWheels\": \"\",\n        \"withTrailer\": false,\n        \"registrationDate\": \"06/12/2020\",\n        \"expiryDt\": \"05/10/2021\",\n        \"previousPolicyType\": \"COMPREHENSIVE\",\n        \"policyType\": \"comprehensive\",\n        \"customerName\": \"test\",\n        \"paidUserMobile\": \"\",\n        \"insurerData\": {\n            \"royalSundaramQuoteId\": null,\n            \"universalSompoProposalQuotationID\": \"74676573\",\n            \"royalSundaramVersionNo\": null,\n            \"noOfPassenger\": \"1\",\n            \"showBanner\": false,\n            \"bannerMessage\": \"\",\n            \"enquiryId\": \"973fb782-5104-427e-98ac-2d1352d42d88\",\n            \"deviation\": true,\n            \"deviationAmount\": 5,\n            \"defaulGrossVehicleWeight\": \"\",\n            \"grossVehicleWeight\": \"\",\n            \"minGrossVehicleWeight\": \"\",\n            \"maxGrossVehicleWeight\": \"\",\n            \"isBreakin\": \"\",\n            \"listOfApplicableCoverages\": [\n                {\n                    \"coverType\": \"THIRD_PARTY\",\n                    \"coverAvailability\": \"MANDATORY\",\n                    \"coverCode\": \"THIRD_PARTY\",\n                    \"name\": \"Motor Third Party Liability Insurance\",\n                    \"selection\": true,\n                    \"value\": {\n                        \"insuredValue\": 0\n                    },\n                    \"subCovers\": [\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"MANDATORY\",\n                            \"name\": \"Property Damage\",\n                            \"componentNumber\": \"10061\",\n                            \"selection\": true,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 750000,\n                                \"validValues\": [\n                                    6000,\n                                    750000\n                                ]\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 11320.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"name\": \"Is Geographical Extension taken?\",\n                            \"componentNumber\": \"48764\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"CNG Kit - IMT 25\",\n                            \"componentNumber\": \"10134\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"L1 Cover\",\n                            \"componentNumber\": \"49749\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        }\n                    ],\n                    \"netPremium\": \"INR 0.00\"\n                },\n                {\n                    \"coverType\": \"OWN_DAMAGE\",\n                    \"coverAvailability\": \"MANDATORY\",\n                    \"coverCode\": \"OWN_DAMAGE\",\n                    \"name\": \"Motor Own Damage\",\n                    \"selection\": true,\n                    \"value\": {\n                        \"valueType\": \"SUM_INSURED\",\n                        \"insuredValue\": 518117,\n                        \"minValue\": 518117,\n                        \"maxValue\": 777176\n                    },\n                    \"discount\": {\n                        \"userSpecialDiscountPercent\": 0,\n                        \"defaultSpecialDiscountPercent\": 80,\n                        \"effectiveSpecialDiscountPercent\": 0,\n                        \"minSpecialDiscountPercent\": 0,\n                        \"maxSpecialDiscountPercent\": 80,\n                        \"discounts\": [\n                            {\n                                \"discountType\": \"UW_DISCOUNT\",\n                                \"discountPercent\": 80,\n                                \"discountAmount\": \"INR 10718.80\"\n                            },\n                            {\n                                \"discountType\": \"NCB_DISCOUNT\",\n                                \"discountPercent\": 25,\n                                \"discountAmount\": \"INR 893.24\"\n                            }\n                        ]\n                    },\n                    \"surcharge\": {\n                        \"loadings\": []\n                    },\n                    \"subCovers\": [\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"name\": \"IMT23\",\n                            \"componentNumber\": \"47860\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"name\": \"Theft and conversion Risk - IMT 43\",\n                            \"componentNumber\": \"47859\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"name\": \"Is NCB Transfer Applicable?\",\n                            \"componentNumber\": \"48441\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"name\": \"IMT 47 (Overturning Cover Exclusion)\",\n                            \"componentNumber\": \"47857\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"MANDATORY\",\n                            \"name\": \"Compulsary Deductible - IMT 21\",\n                            \"componentNumber\": \"47862\",\n                            \"selection\": true,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"name\": \"Compulsary Deductible - IMT 22\",\n                            \"componentNumber\": \"10159\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"name\": \"Is Geographical Extension taken?\",\n                            \"componentNumber\": \"48764\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OWN_DAMAGE\",\n                            \"name\": \"Voluntary deductible - IMT 22A\",\n                            \"componentNumber\": \"10064\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"CNG Kit - IMT 25\",\n                            \"componentNumber\": \"10134\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 15000,\n                                \"minValue\": 15000,\n                                \"maxValue\": 80000\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"Electrical Accessories - IMT 24\",\n                            \"componentNumber\": \"10132\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"Electrical Accessories - IMT 24\",\n                            \"componentNumber\": \"47800\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 518,\n                                \"minValue\": 518,\n                                \"maxValue\": 103623\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"Non Electrical Accessories - IMT 24\",\n                            \"componentNumber\": \"10133\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"Non Electrical Accessories - IMT 24\",\n                            \"componentNumber\": \"47801\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 518,\n                                \"minValue\": 518,\n                                \"maxValue\": 103623\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"R1 Cover\",\n                            \"componentNumber\": \"49067\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"ACCESSORIES\",\n                            \"name\": \"L1 Cover\",\n                            \"componentNumber\": \"49749\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        }\n                    ],\n                    \"netPremium\": \"INR 3572.95\",\n                    \"tariffPremium\": \"INR 13399.00\",\n                    \"withZeroDepNetPremium\": \"INR 0.00\",\n                    \"ncbDiscountWithZeroDep\": \"INR 0.00\",\n                    \"withoutZeroDepNetPremium\": \"INR 0.00\",\n                    \"ncbDiscountWithoutZeroDep\": \"INR 0.00\",\n                    \"plan\": \"PLAN_D\"\n                },\n                {\n                    \"coverType\": \"ADDONS\",\n                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                    \"coverCode\": \"ADDONS\",\n                    \"name\": \"Motor Own Damage -  Add Ons\",\n                    \"selection\": false,\n                    \"value\": {\n                        \"insuredValue\": 0\n                    },\n                    \"subCovers\": [\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Term Plan\",\n                            \"componentNumber\": \"48081\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"RSA_ADDON\",\n                            \"name\": \"Road Side Assistance\",\n                            \"componentNumber\": \"\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"RSA_ADDON\",\n                            \"name\": \"Breakdown Assistance\",\n                            \"componentNumber\": \"\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Tyre Protect\",\n                            \"componentNumber\": \"10035\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Parts Depreciation Protect\",\n                            \"componentNumber\": \"10031\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover only 1 claims per year\",\n                                    \"componentNumber\": \"10143\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                },\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover only 2 claims per year\",\n                                    \"componentNumber\": \"10144\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                },\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover Unlimited Claims\",\n                                    \"componentNumber\": \"10145\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                },\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover Unlimited Claims Plus1\",\n                                    \"componentNumber\": \"48163\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                },\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover Unlimited Claims Plus 2\",\n                                    \"componentNumber\": \"48166\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                },\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover Unlimited Claims Plus 3\",\n                                    \"componentNumber\": \"48168\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [\n                                        {\n                                            \"coverType\": \"Cover\",\n                                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                                            \"name\": \"KP-clause\",\n                                            \"componentNumber\": \"48181\",\n                                            \"selection\": false,\n                                            \"value\": {\n                                                \"insuredValue\": 0\n                                            },\n                                            \"subCovers\": [],\n                                            \"netPremium\": \"INR 0.00\"\n                                        },\n                                        {\n                                            \"coverType\": \"Cover\",\n                                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                                            \"name\": \"PL-clause\",\n                                            \"componentNumber\": \"48182\",\n                                            \"selection\": false,\n                                            \"value\": {\n                                                \"insuredValue\": 0\n                                            },\n                                            \"subCovers\": [],\n                                            \"netPremium\": \"INR 0.00\"\n                                        }\n                                    ],\n                                    \"netPremium\": \"INR 0.00\"\n                                },\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover only 2 claims per year Plus 1\",\n                                    \"componentNumber\": \"48200\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                },\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover only 2 claims per year Plus 3\",\n                                    \"componentNumber\": \"48201\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                }\n                            ],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Consumable cover\",\n                            \"componentNumber\": \"10038\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Engine and Gear Box Protect\",\n                            \"componentNumber\": \"10032\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Return to Invoice\",\n                            \"componentNumber\": \"10034\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Rim Protect Cover\",\n                            \"componentNumber\": \"10036\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Additional Towing Expenses\",\n                            \"componentNumber\": \"49920\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Debris Removal Expenses\",\n                            \"componentNumber\": \"49921\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Personal Belonging\",\n                            \"componentNumber\": \"51463\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover only 1 claims per year\",\n                                    \"componentNumber\": \"51465\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                }\n                            ],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"OTHER_ADDON\",\n                            \"name\": \"Key and Lock Protect\",\n                            \"componentNumber\": \"51464\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"NOT_AVAILABLE\",\n                                    \"name\": \"Cover only 1 claims per year\",\n                                    \"componentNumber\": \"51467\",\n                                    \"selection\": false,\n                                    \"value\": {\n                                        \"insuredValue\": 0\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                }\n                            ],\n                            \"netPremium\": \"INR 0.00\"\n                        }\n                    ],\n                    \"netPremium\": \"INR 0.00\"\n                },\n                {\n                    \"coverType\": \"PA_OWNER\",\n                    \"coverAvailability\": \"AVAILABLE\",\n                    \"coverCode\": \"PA_OWNER\",\n                    \"name\": \"PA Owner Driver\",\n                    \"selection\": false,\n                    \"value\": {\n                        \"valueType\": \"SUM_INSURED\",\n                        \"insuredValue\": 1500000\n                    },\n                    \"subCovers\": [\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"PA_OWNER\",\n                            \"name\": \"Personal Accident\",\n                            \"componentNumber\": \"10028\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"MANDATORY\",\n                            \"coverCode\": \"PA_OWNER\",\n                            \"name\": \"Personal Accident\",\n                            \"componentNumber\": \"10174\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 1500000,\n                                \"validValues\": [\n                                    1500000\n                                ]\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"NOT_AVAILABLE\",\n                            \"coverCode\": \"PA_OWNER\",\n                            \"name\": \"Term Plan\",\n                            \"componentNumber\": \"48081\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"TERM_COUNT\",\n                                \"insuredValue\": 0\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 0.00\"\n                        }\n                    ],\n                    \"netPremium\": \"INR 0.00\"\n                },\n                {\n                    \"coverType\": \"PA_UNNAMED\",\n                    \"coverAvailability\": \"AVAILABLE\",\n                    \"coverCode\": \"PA_UNNAMED\",\n                    \"name\": \"Unnamed PA Cover\",\n                    \"selection\": false,\n                    \"value\": {\n                        \"valueType\": \"SUM_INSURED\",\n                        \"insuredValue\": 200000,\n                        \"minValue\": 100000,\n                        \"maxValue\": 200000,\n                        \"validValues\": [\n                            100000,\n                            200000\n                        ]\n                    },\n                    \"subCovers\": [\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"PA cover for Unnamed passenger\",\n                            \"componentNumber\": \"47715\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 200000,\n                                \"minValue\": 100000,\n                                \"maxValue\": 200000,\n                                \"validValues\": [\n                                    100000,\n                                    200000\n                                ]\n                            },\n                            \"subCovers\": [\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"MANDATORY\",\n                                    \"name\": \"Number of Unnamed Passenger\",\n                                    \"componentNumber\": \"47716\",\n                                    \"selection\": true,\n                                    \"value\": {\n                                        \"valueType\": \"INSURED_COUNT\",\n                                        \"insuredValue\": 1,\n                                        \"minValue\": 1,\n                                        \"maxValue\": 1\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                }\n                            ],\n                            \"netPremium\": \"INR 120.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"PA cover for Paid Cleaner - IMT 17\",\n                            \"componentNumber\": \"47710\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 200000,\n                                \"minValue\": 100000,\n                                \"maxValue\": 200000,\n                                \"validValues\": [\n                                    100000,\n                                    200000\n                                ]\n                            },\n                            \"subCovers\": [\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"MANDATORY\",\n                                    \"name\": \"Number of Paid Cleaner\",\n                                    \"componentNumber\": \"47712\",\n                                    \"selection\": true,\n                                    \"value\": {\n                                        \"valueType\": \"INSURED_COUNT\",\n                                        \"insuredValue\": 1,\n                                        \"minValue\": 1,\n                                        \"maxValue\": 1\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                }\n                            ],\n                            \"netPremium\": \"INR 120.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"PA cover for Paid Driver - IMT 17\",\n                            \"componentNumber\": \"47711\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 200000,\n                                \"minValue\": 100000,\n                                \"maxValue\": 200000,\n                                \"validValues\": [\n                                    100000,\n                                    200000\n                                ]\n                            },\n                            \"subCovers\": [\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"MANDATORY\",\n                                    \"name\": \"Number of Paid Driver\",\n                                    \"componentNumber\": \"47713\",\n                                    \"selection\": true,\n                                    \"value\": {\n                                        \"valueType\": \"INSURED_COUNT\",\n                                        \"insuredValue\": 1,\n                                        \"minValue\": 1,\n                                        \"maxValue\": 1\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                }\n                            ],\n                            \"netPremium\": \"INR 120.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"PA cover for Paid Conductors - IMT 17\",\n                            \"componentNumber\": \"47709\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"SUM_INSURED\",\n                                \"insuredValue\": 200000,\n                                \"minValue\": 100000,\n                                \"maxValue\": 200000,\n                                \"validValues\": [\n                                    100000,\n                                    200000\n                                ]\n                            },\n                            \"subCovers\": [\n                                {\n                                    \"coverType\": \"Cover\",\n                                    \"coverAvailability\": \"MANDATORY\",\n                                    \"name\": \"Number of Paid Conductors\",\n                                    \"componentNumber\": \"47714\",\n                                    \"selection\": true,\n                                    \"value\": {\n                                        \"valueType\": \"INSURED_COUNT\",\n                                        \"insuredValue\": 1,\n                                        \"minValue\": 1,\n                                        \"maxValue\": 1\n                                    },\n                                    \"subCovers\": [],\n                                    \"netPremium\": \"INR 0.00\"\n                                }\n                            ],\n                            \"netPremium\": \"INR 120.00\"\n                        }\n                    ],\n                    \"netPremium\": \"INR 0.00\"\n                },\n                {\n                    \"coverType\": \"LEGAL_LIABILITY\",\n                    \"coverAvailability\": \"AVAILABLE\",\n                    \"coverCode\": \"LEGAL_LIABILITY\",\n                    \"name\": \"Legal Liability for Operations\",\n                    \"selection\": false,\n                    \"value\": {\n                        \"insuredValue\": 0\n                    },\n                    \"subCovers\": [\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"Legal Liability to Paid Driver - IMT 28\",\n                            \"componentNumber\": \"10181\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"INSURED_COUNT\",\n                                \"insuredValue\": 1,\n                                \"minValue\": 1,\n                                \"maxValue\": 2,\n                                \"validValues\": [\n                                    1,\n                                    2\n                                ]\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 50.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"Number of Cleaners\",\n                            \"componentNumber\": \"10185\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"INSURED_COUNT\",\n                                \"insuredValue\": 1,\n                                \"minValue\": 1,\n                                \"maxValue\": 1,\n                                \"validValues\": [\n                                    1,\n                                    2,\n                                    3,\n                                    4,\n                                    5,\n                                    6\n                                ]\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 50.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"Non fare paying passengers\",\n                            \"componentNumber\": \"47707\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"INSURED_COUNT\",\n                                \"insuredValue\": 1,\n                                \"minValue\": 1,\n                                \"maxValue\": 1,\n                                \"validValues\": [\n                                    1,\n                                    2,\n                                    3,\n                                    4,\n                                    5,\n                                    6\n                                ]\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 125.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"Number of people employed in loading/unloading/maintaining\",\n                            \"componentNumber\": \"47725\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"INSURED_COUNT\",\n                                \"insuredValue\": 1,\n                                \"minValue\": 1,\n                                \"maxValue\": 5,\n                                \"validValues\": [\n                                    1,\n                                    2,\n                                    3,\n                                    4,\n                                    5\n                                ]\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 50.00\"\n                        },\n                        {\n                            \"coverType\": \"Cover\",\n                            \"coverAvailability\": \"AVAILABLE\",\n                            \"name\": \"Number of people employed in loading/unloading/maintaining (6 to 20)\",\n                            \"componentNumber\": \"47726\",\n                            \"selection\": false,\n                            \"value\": {\n                                \"valueType\": \"INSURED_COUNT\",\n                                \"insuredValue\": 6,\n                                \"minValue\": 6,\n                                \"maxValue\": 20,\n                                \"validValues\": [\n                                    6,\n                                    7,\n                                    8,\n                                    9,\n                                    10,\n                                    11,\n                                    12,\n                                    13,\n                                    14,\n                                    15,\n                                    16,\n                                    17,\n                                    18,\n                                    19,\n                                    20\n                                ]\n                            },\n                            \"subCovers\": [],\n                            \"netPremium\": \"INR 300.00\"\n                        }\n                    ],\n                    \"netPremium\": \"INR 0.00\"\n                }\n            ],\n            \"insurerVehicleId\": \"189145\",\n            \"unisompo_exshowroom\": 725653,\n            \"sompoIdv\": 585965,\n            \"clientCode\": 20000042,\n            \"posPolicyNo\": 74676573,\n            \"vehicleClass\": \"PCV\",\n            \"tarifRate\": 0,\n            \"exShowRoomPrice\": 725653\n        },\n        \"isExpiryDateSet\": false,\n        \"makeModelId\": \"34588\",\n        \"applicableNCB\": 25,\n        \"vertical\": \"CV\",\n        \"type\": \"async\"\n    }\n}")
                .asString();
        String result = response.getBody();
        return result;
    }

    private static JSONObject updateInsurerDataInIdvrequestBody(JSONObject idvRequestBody) throws IOException, ParseException {
        JSONObject premiumRequestResponse = getPremiumRequestResponse();
        JSONObject data = (JSONObject) premiumRequestResponse.get("data");
        JSONArray premiumResults = (JSONArray) data.get("premiumResults");
        JSONObject insurerData = getInsurerData(premiumResults);
        JSONObject motorPremiumRequest = (JSONObject) idvRequestBody.get("motorPremiumRequest");
        motorPremiumRequest.put("insurerData", insurerData);
        idvRequestBody.put("motorPremiumRequest", motorPremiumRequest);
        return idvRequestBody;
    }

    private static JSONObject getInsurerData(JSONArray premiumResults) {
        JSONObject tempInsurerData;
        JSONObject insurerDataFinal = new JSONObject();
        for (Object insurerResult: premiumResults) {
            JSONObject insurerJsonResult = (JSONObject) insurerResult;
            tempInsurerData = (JSONObject) ((JSONObject)insurerJsonResult.get("motorPremiumResult")).get("insurerData");
            for (Object item : tempInsurerData.keySet()
                 ) {
                insurerDataFinal.put(item, tempInsurerData.get(item));
            }
        }
        return insurerDataFinal;
    }

    private static JSONObject getPremiumRequestResponse() throws IOException, ParseException {
        JSONObject premiumRequestResponse = (JSONObject) parser.parse(new FileReader("/Users/gopikrishna/workspace/OfflinePolicyQuote/src/main/java/OfflineQuotes/configs/premiumRequestResponse.json"));
        return premiumRequestResponse;
    }

    private static JSONObject getIdvRequestBody() throws IOException, ParseException {
        JSONObject idvRequestBody = (JSONObject) parser.parse(new FileReader("/Users/gopikrishna/workspace/OfflinePolicyQuote/src/main/java/OfflineQuotes/configs/idvRequest.json"));
        return idvRequestBody;
    }
}
